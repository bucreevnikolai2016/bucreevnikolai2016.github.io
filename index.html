<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="contact form example">
  <title>Оболочка</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<style>
body {
background-color: #000000;
}
::-webkit-scrollbar {
  width: 0;
}
.example {
  -ms-overflow-style: none;
  scrollbar-width: none;
}
.vid {
z-index: 0;
position: absolute;
width: 1366px;
height: 768px;
left: 0px;
top: 0px;
}
.youtube {
z-index: 10;
position: absolute;
width: 366px;
height: 206px;
left: 1000px;
top: 0px;
}
.chat {
z-index: 10;
position: absolute;
width: 366px;
height: 450px;
left: 1000px;
top: 205px;
opacity: 0.5;
}
.slidecontainer {
z-index: 100;
position: absolute;
left: 1165px;
top: 665px;
}
.myButton2 {
z-index: 100;
position: absolute;
left: 1327px;
top: 660px;
width: 30px;
height: 30px;
background-color: #2F4F4F;
border: none;
color: white; 
font-size: 19px;
cursor: pointer;
}
.myButton3 {
z-index: 100;
position: absolute;
left: 0px;
top: 790px;
}
.sum {
z-index: 100;
position: absolute;
left: 1247px;
top: 660px;
width: 30px;
height: 30px;
background-color: #2F4F4F;
border: none;
color: white; 
font-size: 19px;
cursor: pointer;
}
.sub {
z-index: 100;
position: absolute;
left: 1287px;
top: 660px;
width: 30px;
height: 30px;
background-color: #2F4F4F;
border: none;
color: white; 
font-size: 19px;
cursor: pointer;
}
.slider {
z-index: 100;
width: 70px;
}
.podknop {
z-index: 50;
position: absolute;
background-color: #000000;
opacity: 0.4;
width: 366px;
height: 41px;
left: 1000px;
top: 655px;
}
</style>  

<script>
function mouseCoords(e) {
document.getElementById("myButton2").style.display = '';
document.getElementById("sum").style.display = '';
document.getElementById("sub").style.display = '';
}
</script>	
	
</head>
	
<body onmousemove="mouseCoords(event)">	
	
<button class="sum" id="sum" ><i class="fa fa-expand" aria-hidden="true"></i></button>
<button class="sub" id="sub" ><i class="fa fa-compress" aria-hidden="true"></i></button>
<script>
	document.querySelector('#sum').addEventListener('click', function(){
        if(document.documentElement.webkitRequestFullscreen) {
                document.documentElement.webkitRequestFullscreen();
        }
        else{
            document.documentElement.mozRequestFullScreen();
        }
});
document.querySelector('#sub').addEventListener('click', function(){
    if(document.documentElement.webkitRequestFullscreen) {
        document.webkitCancelFullScreen()
   }
    else{
        document.mozCancelFullScreen();
    }
});
    </script>	
	
<script type="text/javascript">
setInterval(function() {
if (!vid.paused) {
document.getElementById("myButton2").style.display = 'none'; 
document.getElementById("sum").style.display = 'none'; 
document.getElementById("sub").style.display = 'none';
} else {
document.getElementById("myButton2").style.display = '';
document.getElementById("sum").style.display = '';
document.getElementById("sub").style.display = '';
}
}, 3000);
</script> 

<div id="podknop" class="podknop"></div>	
	
<script type="text/javascript">
setInterval(function() { 
var you = document.getElementById("youtube");
var shirok = window.innerWidth;
var visok = window.innerHeight
var leftyou = shirok * (1000 / 1366);
var shiryou = shirok * (366 / 1366);
var visyou = shiryou / 1.77777777;
you.style.left = leftyou + "px";
you.style.width = shiryou + "px";
you.style.height = visyou + "px";
	
var vid = document.getElementById("vid");
var visvid = shirok / 1.77777777;
vid.style.width = shirok + "px";
vid.style.height = visvid + "px";
	
if (shirok >= 1100) {
var chat = document.getElementById("chat");
chat.style.transform = "scale(1)";
var shirchat = shirok * (366 / 1366);
var vischat = shirchat * (450 / 366);
var leftchat = shirok * (1000 / 1366);
var topchat = visvid * (205 / 768);
chat.style.width = shirchat + "px";
chat.style.height = vischat + "px";
chat.style.left = leftchat + "px";
chat.style.top = topchat + "px";
}
if (shirok < 1100) {
var chat = document.getElementById("chat");
var leftchat = shirok * (1000 / 1366);
var topchat = visvid * (205 / 768);
chat.style.width = "295px";
chat.style.height = "363px";
var kof = shirok / 1100;
var kof2 = "scale(" + kof + ")";
chat.style.transform = kof2;
var newsirchat = kof * 295;
var newvischat = kof * 363;
var raznsirchat = newsirchat - 295;
var raznvischat = newvischat - 363;
var smeshchatleft = raznsirchat / 2;
var smeshchattop = raznvischat / 2;
chat.style.left = smeshchatleft + leftchat + "px";
chat.style.top = smeshchattop + topchat + "px";
}
	
var podknop = document.getElementById("podknop");
var shirpodknop = shirok * (366 / 1366);
var vispodknop = shirpodknop * (41 / 366);
var leftpodknop = shirok * (1000 / 1366);
var toppodknop = visvid * (655 / 768);
podknop.style.width = shirpodknop + "px";
podknop.style.height = vispodknop + "px";
podknop.style.left = leftpodknop + "px";
podknop.style.top = toppodknop + "px";
	
var myButton2 = document.getElementById("myButton2");
var leftmyButton2 = shirok * (1327 / 1366);
var topmyButton2 = visvid * (660 / 768);
myButton2.style.left = leftmyButton2 + "px";
myButton2.style.top = topmyButton2 + "px";
	
var sum = document.getElementById("sum");
var leftsum = shirok * (1247 / 1366);
var topsum = visvid * (660 / 768);
sum.style.left = leftsum + "px";
sum.style.top = topsum + "px";
	
var sub = document.getElementById("sub");
var leftsub = shirok * (1287 / 1366);
var topsub = visvid * (660 / 768);
sub.style.left = leftsub + "px";
sub.style.top = topsub + "px";
	
var slidecontainer = document.getElementById("slidecontainer");
var leftslidecontainer = shirok * (1165 / 1366);
var topslidecontainer = visvid * (665 / 768);
slidecontainer.style.left = leftslidecontainer + "px";
slidecontainer.style.top = topslidecontainer + "px";
}, 300);
</script> 

<input id="ypr" style="display: none" name="ypr" value=""/> 

<iframe class="youtube" id="youtube" src="" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<iframe class="chat" id="chat" style="border:0" src=""></iframe> 

<video class="vid" id="vid">
  <source src="" />
</video>   
	
<div class="slidecontainer" id="slidecontainer">
  <input type="range" min="1" max="100" value="50" class="slider" id="myRange">
  <p id="pp" style="display: none">Volume: <span id="demo" style="display: none"></span></p>
</div>
	
<script>
var slider = document.getElementById("myRange");
var output = document.getElementById("demo");
output.innerHTML = slider.value;
slider.oninput = function() {
output.innerHTML = this.value;
}
</script>	

<script type="text/javascript">
setInterval(function() {
if (document.getElementById('vid').controls == false) {
var input = document.getElementById("demo");
var text = input.innerHTML;
var v1 = text / 100;
vid.volume = v1; 
} 
}, 300);
</script> 	
 
<div style="display: none" class="json" id="json">json here</div>
<script type="text/javascript">
    setInterval(function() { 
       var id = '1d5z8fcfH7mQxtlwu7Aof73LaedRrEBPnAo4eJTuBgBM';
var gid = '0';
var url = 'https://docs.google.com/spreadsheets/d/'+id+'/gviz/tq?tqx=out:json&tq&gid='+gid;
fetch(url)
  .then(response => response.text())
  .then(data => document.getElementById("json").innerHTML=myItems(data.slice(47, -2))  
  );
function myItems(jsonString){
  var json = JSON.parse(jsonString);
  var table = '<table><tr>'
  json.table.cols.forEach(colonne => table += '<th>' + colonne.label + '</th>')
  table += '</tr>'
  json.table.rows.forEach(ligne => {
    table += '<tr>'
    ligne.c.forEach(cellule => {
        try{var valeur = cellule.f ? cellule.f : cellule.v}
        catch(e){var valeur = ''}
        table += '<td>' + valeur + '</td>'
      }
    )
    table += '</tr>'
    }
  )
  table += '</table>'
  return table
}
      }, 300);
    </script> 
   
<div style="display: none" class="json2" id="json2">json here</div>
<script type="text/javascript">
    setInterval(function() { 
       var id = '1VwEb0wFPn0GhpjNK8jAq7NzcyHUNLM1ht7r31lZ36F4';
var gid = '0';
var url = 'https://docs.google.com/spreadsheets/d/'+id+'/gviz/tq?tqx=out:json&tq&gid='+gid;
fetch(url)
  .then(response => response.text())
  .then(data => document.getElementById("json2").innerHTML=myItems(data.slice(47, -2))  
  );
function myItems(jsonString){
  var json = JSON.parse(jsonString);
  var table = '<table><tr>'
  json.table.cols.forEach(colonne => table += '<th>' + colonne.label + '</th>')
  table += '</tr>'
  json.table.rows.forEach(ligne => {
    table += '<tr>'
    ligne.c.forEach(cellule => {
        try{var valeur = cellule.f ? cellule.f : cellule.v}
        catch(e){var valeur = ''}
        table += '<td>' + valeur + '</td>'
      }
    )
    table += '</tr>'
    }
  )
  table += '</table>'
  return table
}
      }, 300);
    </script>    

<script>
setInterval(function() { 
var p1 = json.firstElementChild;
var p2 = p1.firstElementChild;
var p3 = p2.lastElementChild;
var p4 = p3.lastElementChild;
var p5 = p4.innerHTML;
var p6 = p5.slice(-11);
var p7 = "https://www.youtube.com/live_chat?v=" + p6 + "&embed_domain=bucreevnikolai2016.github.io&dark_theme=1";
var p8 = p4.previousElementSibling;
var p9 = p8.innerHTML;
var p10 = "https://www.youtube.com/embed/" + p6;
if (document.getElementById("youtube").src != p10) {
document.getElementById("youtube").src = p10;
}
if (document.getElementById("chat").src != p7) {
document.getElementById("chat").src = p7;
}
if (document.getElementById("vid").src != p9) {
document.getElementById("vid").src = p9;
}
}, 300);
</script>  
    
<script type="text/javascript">
  function handleButtonClick3() {
  setInterval(function() {
  var p1 = json2.firstElementChild;
  var p2 = p1.firstElementChild;
  var p3 = p2.lastElementChild;
  var p4 = p3.lastElementChild;
  var p5 = p4.innerHTML;
  var p6 = p4.previousElementSibling;
  var p9 = p6.innerHTML;
  if (vid.paused) {
  var p10 = '0';
  } else {
  var p10 = '1';
  }
  var p11 = document.getElementById('ypr').value;
  if (p10 != p5 || p9 != p11) {
  if (p5 == 0) {
  vid.pause();
  vid.currentTime = p9;
  document.getElementById('ypr').value = p9;
  } 
  if (p5 == 1) {
  vid.play();
  vid.currentTime = p9;
  document.getElementById('ypr').value = p9;
  }
  }
          }, 10);
  }
    </script>    
          




<button class="myButton2" id="myButton2" type="button"><i class="fa fa-cog" aria-hidden="true"></i></button>   
<button class="myButton3" id="myButton3" style="display: none" type="button">Пользователь мод (ПП)</button> 
<button id="myButton4" style="display: none" type="button">Пользователь мод (ПЕР)</button>  
       
<input id="otpravka" style="display: none" name="otpravka" value=""/>   
<input id="emylast" style="display: none" name="emylast" value=""/>  
<input id="timeotp" style="display: none" name="timeotp" value="0"/>  
<input id="per" style="display: none" name="per" value="0"/> 
<input id="pertime" style="display: none" name="pertime" value="0"/> 
<input id="sinh" style="display: none" name="sinh" value="0"/> 
 
<script type="text/javascript">    
  window.onload = init;
  function init(){
  var button2 = document.getElementById("myButton2")
  var button3 = document.getElementById("myButton3")
  var button4 = document.getElementById("myButton4")
  button2.onclick = handleButtonClick2;
  button3.onclick = handleButtonClick3;
  button4.onclick = handleButtonClick4;
  }
    </script>
  
<script type="text/javascript">
setInterval(function() { 
function sleep(ms) {
  return new Promise(resolve => setTimeout(resolve, ms));
}
async function delayedGreeting() {
  var t1 = vid.currentTime;
  await sleep(50);
  var t2 = vid.currentTime;
  var t3 = t1 - t2;
  var t4 = Math.abs(t3);
  var t5 = document.getElementById('pertime').value;
  if (t4 > 1 & t5 == 0) {document.getElementById('per').value = '1';};
}
delayedGreeting();
}, 50);
</script> 
	
<script type="text/javascript">
setInterval(function() {
document.getElementById('sinh').value = '1';
}, 30000);
</script>  
	
<script type="text/javascript">
function handleButtonClick2() {
setTimeout(() => { fetch("https://script.google.com/macros/s/AKfycbxqX-gP8k6wGjEOiPTkhh0UNFnMDv9UlmUWAKP7ihHuA6Hh7SXafabgiucAMH1RYdyGDQ/exec"+ "?" + "p3=1", { method: "GET", headers:{"content-type":"application/x-www-form-urlencoded"} }) }, 1500);
document.getElementById('myRange').style.display = 'none';
document.getElementById('vid').controls =  true;
setInterval(function() {   
var t7 = vid.currentTime;
var t9 = t7 + 1.5;
var t8 = document.getElementById('emylast').value;
if (vid.paused) {
var t6 = '0';
} else {
var t6 = '1';
}
if (t8 == t6) {
if (document.getElementById('otpravka').value == 1) {
document.getElementById('otpravka').value = '0';
} else {
}
} 
if (t8 != t6 || document.getElementById('per').value == 1 || document.getElementById('sinh').value == 1) {
if (document.getElementById('otpravka').value == 1) {
} else {
if (document.getElementById('timeotp').value == 0) {
fetch("https://script.google.com/macros/s/AKfycbxqX-gP8k6wGjEOiPTkhh0UNFnMDv9UlmUWAKP7ihHuA6Hh7SXafabgiucAMH1RYdyGDQ/exec"+ "?" + "p1=" + t7 + "&p2=" + t6,
    { 
	method: "GET", 
	headers:{"content-type":"application/x-www-form-urlencoded"} 
	})
} else {
setTimeout(() => { fetch("https://script.google.com/macros/s/AKfycbxqX-gP8k6wGjEOiPTkhh0UNFnMDv9UlmUWAKP7ihHuA6Hh7SXafabgiucAMH1RYdyGDQ/exec"+ "?" + "p1=" + t9 + "&p2=" + t6, { method: "GET", headers:{"content-type":"application/x-www-form-urlencoded"} }) }, 1500);
}
document.getElementById('otpravka').value = '1';
document.getElementById('emylast').value = t6;
document.getElementById('timeotp').value = '1';
document.getElementById('pertime').value = '1';
document.getElementById('per').value = '0';
document.getElementById('sinh').value = '0';
setTimeout(() => { document.getElementById('pertime').value = '0'; }, 50);
setTimeout(() => { document.getElementById('timeotp').value = '0'; }, 1500);
}
}
}, 10);
}
</script>

</body>	
	
</html>
